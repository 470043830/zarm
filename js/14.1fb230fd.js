webpackJsonp([14],{253:function(e,t,a){"use strict";function n(e,t){var a=t-e,n=Math.random();return e+Math.round(n*a)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(426),a(428)),o=(a(275),a(276)),s=(a(278),a(279)),l=a(270),i=a.n(l),c=a(65),u=a.n(c),d=a(66),f=a.n(d),m=a(67),p=a.n(m),h=a(68),v=a.n(h),E=a(69),g=a.n(E),b=a(0),D=a.n(b),S=a(273),y=a(277),w=a(274),N=a(431),T=(a.n(N),{normal:0,pull:1,drop:2,loading:3,success:4,failure:5}),k={normal:0,abort:1,loading:2,success:3,failure:4,complete:5},R=function(e){function t(e){f()(this,t);var a=v()(this,(t.__proto__||u()(t)).call(this,e));return a.fetchData=function(e){a.setState(i()({},""+e,T.loading)),setTimeout(function(){if(a.mounted){for(var t=[],n=t.length,r=n;r<n+20;r++)t.push(D.a.createElement(s.a,{key:+r},"第 ",r+1," 行"));a.setState(i()({dataSource:t},""+e,T.success))}},2e3)},a.loadData=function(){a.setState({customLoading:k.loading}),setTimeout(function(){if(a.mounted){var e=n(0,5),t=a.state.dataSource,r=k.success;if(console.log("状态: "+(0===e?"失败":1===e?"完成":"成功")),0===e)r=k.failure;else if(1===e)r=k.complete;else for(var o=t.length,l=o;l<o+5;l++)t.push(D.a.createElement(s.a,{key:+l},"第 ",l+1," 行"));a.setState({dataSource:t,customLoading:r})}},2e3)},a.mounted=!0,a.state={customRefreshing:T.normal,customLoading:k.normal,dataSource:[]},a}return g()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.fetchData("customRefreshing")}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.customRefreshing,n=t.customLoading,l=t.dataSource,i=[],c=0;c<3;c++)i.push(D.a.createElement(s.a,{key:+c},"第 ",c+1," 行"));return D.a.createElement(S.a,{className:"pull-page"},D.a.createElement(y.a,{title:"上拉加载下拉刷新 Pull"}),D.a.createElement("main",null,D.a.createElement(o.a,null,D.a.createElement(o.a.Header,{title:"基本"}),D.a.createElement(o.a.Body,null,D.a.createElement(r.a,{refresh:{state:a,handler:function(){return e.fetchData("customRefreshing")}},load:{state:n,handler:this.loadData}},l)))),D.a.createElement(w.a,null))}}]),t}(b.Component);t.default=R},426:function(e,t,a){"use strict";var n=(a(269),a(287),a(280),a(427));a.n(n)},427:function(e,t){},428:function(e,t,a){"use strict";var n=a(270),r=a.n(n),o=a(271),s=a.n(o),l=a(65),i=a.n(l),c=a(66),u=a.n(c),d=a(67),f=a.n(d),m=a(68),p=a.n(m),h=a(69),v=a.n(h),E=a(0),g=a.n(E),b=a(429),D=a(268),S=a.n(D),y=a(284),w=a(430),N=a(292),T=a(288),k=a(281),R=function(e){function t(e){u()(this,t);var a=p()(this,(t.__proto__||i()(t)).call(this,e));return a.getScrollContainer=function(){return function(e){for(;e&&e.parentNode&&e.parentNode!==document.body;){if(["scroll","auto"].indexOf(window.getComputedStyle(e).overflowY||"")>-1)return e;e=e.parentNode}}(a.pull)||document.documentElement},a.onScroll=function(){var e=a.state,n=e.refreshState,r=e.loadState,o=a.wrap,l=o.scrollHeight,i=o.scrollTop,c=o.clientHeight,u=s()({},t.defaultProps.load,a.props.load),d=u.handler,f=u.distance;"function"!=typeof d||n!==b.b.normal||r!==b.a.normal||l<=c||l-(i+document.body.scrollTop)-f>c||d()},a.onDragMove=function(e,n){var r=n.offsetY;if(!a.props.refresh.handler||r<=0||r>0&&a.wrap.scrollTop+document.body.scrollTop>0||a.state.refreshState>=b.b.loading)return!1;e.preventDefault();var o=s()({},t.defaultProps.refresh,a.props.refresh),l=o.startDistance,i=o.distance,c=r/2,u=c-l<i?b.b.pull:b.b.drop;return a.doRefreshAction(u,c),!0},a.onDragEnd=function(e,t){var n=t.offsetY;if(e.preventDefault(),n){if(a.state.refreshState===b.b.pull)return void a.doRefreshAction(b.b.normal);var r=a.props.refresh.handler;"function"==typeof r&&r()}},a.doTransition=function(e){var t=e.offsetY,n=e.animationDuration;a.setState({offsetY:t,animationDuration:n})},a.doRefreshAction=function(e,t){var n=a.props,r=n.animationDuration,o=n.stayTime;switch(a.setState({refreshState:e}),e){case b.b.pull:case b.b.drop:a.doTransition({offsetY:t,animationDuration:0});break;case b.b.loading:a.doTransition({offsetY:"auto",animationDuration:r});break;case b.b.success:case b.b.failure:a.doTransition({offsetY:"auto",animationDuration:r}),setTimeout(function(){a.doRefreshAction(b.b.normal),a.doLoadAction(b.a.normal)},o);break;default:a.doTransition({offsetY:0,animationDuration:r})}},a.doLoadAction=function(e){var t=a.props.stayTime;switch(a.setState({loadState:e}),e){case b.a.success:a.doLoadAction(b.a.normal);break;case b.a.failure:setTimeout(function(){a.doLoadAction(b.a.abort)},t)}},a.renderRefresh=function(){var e=s()({},t.defaultProps.refresh,a.props.refresh),n=e.startDistance,r=e.distance,o=e.render,l=a.state,i=l.refreshState,c=l.offsetY,u=0;if(c>=n&&(u=100*(c-n<r?c-n:r)/r),"function"==typeof o)return o(i,u);var d=a.props.prefixCls+"-control";switch(i){case b.b.pull:return g.a.createElement("div",{className:d},g.a.createElement(T.a,{percent:u}),g.a.createElement("span",null,"下拉刷新"));case b.b.drop:return g.a.createElement("div",{className:d},g.a.createElement(T.a,{percent:100}),g.a.createElement("span",null,"释放立即刷新"));case b.b.loading:return g.a.createElement("div",{className:d},g.a.createElement(T.a,{className:"rotate360"}),g.a.createElement("span",null,"加载中"));case b.b.success:return g.a.createElement("div",{className:d},g.a.createElement(k.a,{type:"right-round",theme:"success"}),g.a.createElement("span",null,"加载成功"));case b.b.failure:return g.a.createElement("div",{className:d},g.a.createElement(k.a,{type:"wrong-round",theme:"error"}),g.a.createElement("span",null,"加载失败"))}},a.renderLoad=function(){var e=s()({},t.defaultProps.load,a.props.load),n=e.render,r=a.state.loadState;if("function"==typeof n)return n(r);var o=a.props.prefixCls+"-control";switch(r){case b.a.loading:return g.a.createElement("div",{className:o},g.a.createElement(T.a,{className:"rotate360"}),g.a.createElement("span",null,"加载中"));case b.a.failure:return g.a.createElement("div",{className:o},g.a.createElement(k.a,{type:"wrong-round",theme:"error"}),g.a.createElement("span",null,"加载失败"));case b.a.complete:return g.a.createElement("div",{className:o},g.a.createElement("span",null,"我是有底线的"))}},a.state={offsetY:0,animationDuration:0,refreshState:e.refresh.state,loadState:e.load.state},a}return v()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.wrap=this.getScrollContainer();var e=this.wrap===document.documentElement?window:this.wrap;y.a.on(e,"scroll",Object(w.a)(this.onScroll,250))}},{key:"componentWillReceiveProps",value:function(e){"refresh"in e&&e.refresh.state!==this.props.refresh.state&&this.doRefreshAction(e.refresh.state),"load"in e&&e.load.state!==this.props.load.state&&this.doLoadAction(e.load.state)}},{key:"componentWillUnmount",value:function(){var e=this.wrap===document.documentElement?window:this.wrap;y.a.off(e,"scroll",this.onScroll)}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.className,o=t.children,s=this.state,l=s.offsetY,i=s.animationDuration,c=s.refreshState,u=s.loadState,d=S()(a,n),f=S()(a+"-load",r()({},a+"-load-show",u>=b.a.loading)),m={WebkitTransition:"all "+i+"ms",transition:"all "+i+"ms"};return c<=b.b.drop&&(m.WebkitTransform="translate3d(0, "+l+"px, 0)",m.transform="translate3d(0, "+l+"px, 0)"),g.a.createElement(N.a,{onDragMove:this.onDragMove,onDragEnd:this.onDragEnd},g.a.createElement("div",{className:d},g.a.createElement("div",{className:a+"-content",style:m,ref:function(t){e.pull=t}},g.a.createElement("div",{className:a+"-refresh"},this.renderRefresh()),g.a.createElement("div",{className:a+"-body"},o),g.a.createElement("div",{className:f},this.renderLoad()))))}}]),t}(E.PureComponent);t.a=R,R.defaultProps={prefixCls:"za-pull",refresh:{state:b.b.normal,startDistance:30,distance:50},load:{state:b.a.normal,distance:0},animationDuration:400,stayTime:1e3}},429:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n;!function(e){e[e.normal=0]="normal",e[e.pull=1]="pull",e[e.drop=2]="drop",e[e.loading=3]="loading",e[e.success=4]="success",e[e.failure=5]="failure"}(n||(n={}));var r;!function(e){e[e.normal=0]="normal",e[e.abort=1]="abort",e[e.loading=2]="loading",e[e.success=3]="success",e[e.failure=4]="failure",e[e.complete=5]="complete"}(r||(r={}))},430:function(e,t,a){"use strict";var n=this,r=arguments,o=function(e,t){var a=void 0,o=Date.now();return function(){var s=Date.now(),l=t-(s-o),i=n,c=r;clearTimeout(a),l<=0?(e.apply(i,c),o=Date.now()):a=setTimeout(e,l)}};t.a=o},431:function(e,t){}});